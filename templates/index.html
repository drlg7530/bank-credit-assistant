<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能信贷业务辅助系统</title>
    <!-- 引入外部CSS样式表 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="header">
        <div class="header-center">
            <h1>🏦 智能信贷业务辅助系统</h1>
            <p>基于RAG的智能查询助手 - 政策查询 | 系统操作 | 客户分析</p>
        </div>
        <div class="header-right">
            <div class="role-selector">
                <label>角色：</label>
                <select id="roleSelect" onchange="loadQuickQuestions()">
                    <option value="客户经理" selected>客户经理</option>
                    <option value="团队负责人">团队负责人</option>
                    <option value="行长">行长</option>
                </select>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- 中间：输出内容区域 -->
        <div class="result-area">
            <div class="result-header">
                <h2>📋 查询结果</h2>
            </div>
            <div class="result-content" id="resultContent">
                <div class="empty-state">
                    <div class="empty-state-icon">💬</div>
                    <div class="empty-state-text">请在下方输入问题开始对话</div>
                </div>
            </div>
            <div class="result-input-area">
                <div class="form-group">
                    <textarea id="questionInput" placeholder="请输入您的问题，例如：小额贷款公司的注册资本要求是什么？"></textarea>
                </div>
                <button class="btn btn-primary" onclick="submitQuery()" id="submitBtn">
                    🔍 查询
                </button>
            </div>
        </div>

        <!-- 右侧：快捷问题区域 -->
        <div class="query-area">
            <!-- 对话历史记录模块 -->
            <div class="form-group">
                <label>📜 对话历史</label>
                <div class="conversation-history">
                    <div class="history-header">
                        <h3>💬 历史对话</h3>
                        <div class="history-header-buttons">
                            <button class="btn-refresh" id="newConversationBtn" onclick="startNewConversation()" title="开始新对话">
                                ➕
                            </button>
                            <button class="btn-refresh" id="refreshHistoryBtn" onclick="loadSessionList()" title="刷新历史记录">
                                🔄
                            </button>
                        </div>
                    </div>
                    <div id="conversationHistory" class="history-list">
                        <div class="empty-history">暂无对话记录</div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>快捷问题（点击选择）</label>
                <div class="quick-questions">
                    <h3>💡 快捷问题</h3>
                    <div id="quickQuestions" class="questions-list">
                        <!-- 快捷问题将动态加载 -->
                    </div>
                </div>
            </div>

            <!-- 加载提示 -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>正在处理您的查询，请稍候...</p>
            </div>

            <!-- 错误提示 -->
            <div class="error" id="error"></div>
        </div>
    </div>

    <!-- 引入外部JavaScript文件 -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
